{% extends "base.html" %}
{% block content %}
<h2>Mark Attendance</h2>
<form method="POST">
  {% csrf_token %}

  <div class="mb-3">
    <label for="subject">Select Subject:</label>
    <select name="subject" class="form-control" required>
      {% for subject in subjects %}
        <option value="{{ subject.id }}">{{ subject.name }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label for="date">Select Date:</label>
    <input type="date" name="date" class="form-control" value="{{ today }}">
  </div>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Student</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      {% for student in subject.course.student_set.all %}
      <tr>
        <td>{{ student.username }}</td>
        <td>
          <select name="statuses" class="form-select">
            <option value="Present">Present</option>
            <option value="Absent">Absent</option>
            <option value="Leave">Leave</option>
          </select>
          <input type="hidden" name="student_ids" value="{{ student.id }}">
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <button class="btn btn-primary" type="submit">Submit Attendance</button>
</form>
{% endblock %}
